import {
  Artboard,
  SolidOfRevolution,
  Text,
  Container,
} from "w2l";

/**
 * Solids of Revolution Examples
 * 
 * Demonstrates creating various solids by revolving curves:
 * - Sphere (semicircle)
 * - Cone (line)
 * - Paraboloid (parabola)
 * - Hyperboloid (hyperbola)
 */

const artboard = new Artboard({
  width: 1200,
  height: 800,
  style: { fill: "#f5f5f5" },
});

// Title
const title = new Text({
  content: "Solids of Revolution",
  fontSize: 28,
  fontWeight: "bold",
});

title.position({
  relativeFrom: title.center,
  relativeTo: { x: 600, y: 40 },
  x: 0,
  y: 0,
});

artboard.addElement(title);

// Container for the solids
const solidsContainer = new Container({
  direction: "horizontal",
  gap: 30,
  horizontalAlignment: "center",
  width: 1100,
  height: 550,
  boxModel: { padding: 10 },
});

solidsContainer.position({
  relativeFrom: solidsContainer.centerTop,
  relativeTo: { x: 600, y: 100 },
  x: 0,
  y: 0,
});

// 1. Sphere (revolving semicircle)
const sphere = new SolidOfRevolution({
  radiusFunction: (y) => Math.sqrt(Math.max(0, 1 - y * y)),
  yStart: -1,
  yEnd: 1,
  ySegments: 48,
  radialSegments: 48,
  rotation: [20, 30, 0],
  scale: 0.8,
  canvasWidth: 250,
  canvasHeight: 250,
  material: {
    color: [0.9, 0.3, 0.3, 1.0],
    ambient: 0.3,
    diffuse: 0.6,
    specular: 0.8,
    shininess: 64,
  },
  camera: {
    position: [0, 0, 4],
    target: [0, 0, 0],
    up: [0, 1, 0],
    fov: 45,
  },
});

solidsContainer.addElement(sphere);

// 2. Cone (revolving line)
const cone = new SolidOfRevolution({
  radiusFunction: (y) => 1 - y,
  yStart: 0,
  yEnd: 1,
  ySegments: 32,
  radialSegments: 48,
  rotation: [20, 30, 0],
  scale: 0.8,
  canvasWidth: 250,
  canvasHeight: 250,
  material: {
    color: [0.3, 0.7, 0.3, 1.0],
    ambient: 0.3,
    diffuse: 0.6,
    specular: 0.5,
    shininess: 32,
  },
  camera: {
    position: [0, 0.3, 4],
    target: [0, 0.5, 0],
    up: [0, 1, 0],
    fov: 45,
  },
});

solidsContainer.addElement(cone);

// 3. Paraboloid (revolving parabola)
const paraboloid = new SolidOfRevolution({
  radiusFunction: (y) => Math.sqrt(y) * 0.9,
  yStart: 0,
  yEnd: 1.5,
  ySegments: 40,
  radialSegments: 48,
  rotation: [20, 30, 0],
  scale: 0.8,
  canvasWidth: 250,
  canvasHeight: 250,
  material: {
    color: [0.3, 0.5, 0.9, 1.0],
    ambient: 0.3,
    diffuse: 0.6,
    specular: 0.7,
    shininess: 48,
  },
  camera: {
    position: [0, 0.5, 4],
    target: [0, 0.5, 0],
    up: [0, 1, 0],
    fov: 45,
  },
});

solidsContainer.addElement(paraboloid);

// 4. Hyperboloid (revolving hyperbola)
const hyperboloid = new SolidOfRevolution({
  radiusFunction: (y) => Math.sqrt(0.25 + y * y) * 0.8,
  yStart: -1,
  yEnd: 1,
  ySegments: 40,
  radialSegments: 48,
  rotation: [20, 30, 0],
  scale: 0.8,
  canvasWidth: 250,
  canvasHeight: 250,
  material: {
    color: [0.9, 0.7, 0.3, 1.0],
    ambient: 0.3,
    diffuse: 0.6,
    specular: 0.6,
    shininess: 48,
  },
  camera: {
    position: [0, 0, 4],
    target: [0, 0, 0],
    up: [0, 1, 0],
    fov: 45,
  },
});

solidsContainer.addElement(hyperboloid);

artboard.addElement(solidsContainer);

// Add labels below each solid
const labelsContainer = new Container({
  direction: "horizontal",
  gap: 30,
  horizontalAlignment: "center",
  width: 1100,
});

labelsContainer.position({
  relativeFrom: labelsContainer.centerTop,
  relativeTo: { x: 600, y: 670 },
  x: 0,
  y: 0,
});

const sphereLabel = new Text({
  content: "$\\textbf{Sphere}$\n$r(y) = \\sqrt{1-y^2}$",
  fontSize: 13,
  textAlign: "center",
});

const coneLabel = new Text({
  content: "$\\textbf{Cone}$\n$r(y) = 1-y$",
  fontSize: 13,
  textAlign: "center",
});

const paraboloidLabel = new Text({
  content: "$\\textbf{Paraboloid}$\n$r(y) = \\sqrt{y}$",
  fontSize: 13,
  textAlign: "center",
});

const hyperboloidLabel = new Text({
  content: "$\\textbf{Hyperboloid}$\n$r(y) = \\sqrt{0.25+y^2}$",
  fontSize: 13,
  textAlign: "center",
});

labelsContainer.addElement(sphereLabel);
labelsContainer.addElement(coneLabel);
labelsContainer.addElement(paraboloidLabel);
labelsContainer.addElement(hyperboloidLabel);

artboard.addElement(labelsContainer);

// Add description
const description = new Text({
  content: "Each solid is generated by rotating its profile curve around the Y-axis",
  fontSize: 12,
  style: { fill: "#666" },
});

description.position({
  relativeFrom: description.center,
  relativeTo: { x: 600, y: 760 },
  x: 0,
  y: 0,
});

artboard.addElement(description);

return artboard.render();

