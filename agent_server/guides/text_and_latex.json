{
  "id": "text-and-latex",
  "title": "Text and LaTeX Guide",
  "description": "This guide covers the Text element for displaying text and mathematical notation. The Text class supports plain text, embedded LaTeX formulas, and mixed content with both text and math. It provides powerful annotation capabilities for highlighting and referencing specific parts of formulas.",
  "covers": [
    "Triangle",
    "Circle",
    "Line",
    "Text",
    "Rect",
    "Square",
    "Side"
  ],
  "topics": [
    "Creating Text",
    "LaTeX Formulas",
    "Common LaTeX Symbols and Commands",
    "Positioning Text",
    "Annotating LaTeX Formulas",
    "Complete Examples",
    "Common LaTeX Patterns"
  ],
  "content": "### Plain Text\n\n```javascript\nconst text = new Text({\n  content: \"Hello, World!\",\n  fontSize: 16,\n  fontFamily: \"Arial\",\n  style: { fill: \"black\" }\n});\n\nartboard.add(text);\n```\n\n### Basic Configuration\n\n```javascript\nconst text = new Text({\n  content: \"Sample text\",\n  fontSize: 18,           // Font size in pixels or with units (\"18px\", \"1.2rem\")\n  fontFamily: \"serif\",    // CSS font-family\n  fontWeight: \"bold\",     // CSS font-weight (\"normal\", \"bold\", 400-900)\n  lineHeight: 1.4,        // Line height multiplier\n  style: {\n    fill: \"navy\",         // Text color\n    opacity: 1            // Transparency\n  }\n});\n```\n\n## LaTeX Formulas\n\n### Inline LaTeX\n\nUse single dollar signs `$...$` for inline mathematical notation.\n\n```javascript\nconst text = new Text({\n  content: \"The famous equation $E = mc^2$ was discovered by Einstein.\",\n  fontSize: 16\n});\n\nartboard.add(text);\n```\n\n### Display Mode LaTeX\n\nUse double dollar signs `$$...$$` for display-style (larger, centered) formulas.\n\n```javascript\nconst text = new Text({\n  content: \"The quadratic formula is $$\\\\frac{-b \\\\pm \\\\sqrt{b^2-4ac}}{2a}$$\",\n  fontSize: 16\n});\n\nartboard.add(text);\n```\n\n### Multiple Formulas\n\nMix text and multiple formulas in a single Text element.\n\n```javascript\nconst text = new Text({\n  content: \"Consider $f(x) = x^2$ and $g(x) = 2x$. Their sum is $h(x) = x^2 + 2x$.\",\n  fontSize: 16\n});\n\nartboard.add(text);\n```\n\n## Common LaTeX Symbols and Commands\n\n### Greek Letters\n\n```javascript\nconst text = new Text({\n  content: \"$\\\\alpha, \\\\beta, \\\\gamma, \\\\delta, \\\\epsilon, \\\\theta, \\\\pi, \\\\sigma, \\\\omega$\",\n  fontSize: 18\n});\n```\n\n### Fractions\n\n```javascript\nconst fraction = new Text({\n  content: \"$\\\\frac{a}{b}$ or $\\\\frac{numerator}{denominator}$\",\n  fontSize: 16\n});\n```\n\n### Exponents and Subscripts\n\n```javascript\nconst powers = new Text({\n  content: \"$x^2, x^{10}, x_1, x_{i,j}, x_i^2$\",\n  fontSize: 16\n});\n```\n\n### Square Roots\n\n```javascript\nconst roots = new Text({\n  content: \"$\\\\sqrt{2}, \\\\sqrt{x^2 + y^2}, \\\\sqrt[3]{8}$\",\n  fontSize: 16\n});\n```\n\n### Sums and Integrals\n\n```javascript\nconst calculus = new Text({\n  content: \"$\\\\sum_{i=1}^{n} i = \\\\frac{n(n+1)}{2}$\",\n  fontSize: 16\n});\n\nconst integral = new Text({\n  content: \"$\\\\int_{0}^{1} x^2 dx = \\\\frac{1}{3}$\",\n  fontSize: 16\n});\n```\n\n### Matrices\n\n```javascript\nconst matrix = new Text({\n  content: \"$\\\\begin{pmatrix} a & b \\\\\\\\ c & d \\\\end{pmatrix}$\",\n  fontSize: 16\n});\n```\n\n### Common Math Functions\n\n```javascript\nconst functions = new Text({\n  content: \"$\\\\sin(x), \\\\cos(x), \\\\tan(x), \\\\log(x), \\\\ln(x), \\\\exp(x)$\",\n  fontSize: 16\n});\n```\n\n### Relations and Operations\n\n```javascript\nconst operations = new Text({\n  content: \"$\\\\leq, \\\\geq, \\\\neq, \\\\approx, \\\\equiv, \\\\pm, \\\\times, \\\\div, \\\\cdot$\",\n  fontSize: 16\n});\n```\n\n### Sets\n\n```javascript\nconst sets = new Text({\n  content: \"$\\\\mathbb{R}, \\\\mathbb{C}, \\\\mathbb{N}, \\\\mathbb{Z}, \\\\mathbb{Q}$\",\n  fontSize: 16\n});\n```\n\n### Special Symbols\n\n```javascript\nconst symbols = new Text({\n  content: \"$\\\\infty, \\\\partial, \\\\nabla, \\\\angle, \\\\perp, \\\\parallel, \\\\therefore$\",\n  fontSize: 16\n});\n```\n\n## Positioning Text\n\n### Absolute Positioning\n\n```javascript\nconst text = new Text({\n  content: \"Positioned text\",\n  fontSize: 16\n});\n\ntext.position({\n  relativeFrom: text.topLeft,\n  relativeTo: artboard.contentBox.topLeft,\n  x: 50,\n  y: 50\n});\n\nartboard.add(text);\n```\n\n### Relative to Element\n\n```javascript\nconst circle = new Circle({ radius: 50 });\nartboard.add(circle);\n\nconst label = new Text({\n  content: \"Circle\",\n  fontSize: 14\n});\n\n// Position below the circle\nlabel.position({\n  relativeFrom: label.topCenter,\n  relativeTo: circle.center,\n  x: 0,\n  y: 60\n});\n\nartboard.add(label);\n```\n\n### Anchor Points\n\nText supports all standard anchor points:\n- `topLeft`, `topCenter`, `topRight`\n- `centerLeft`, `center`, `centerRight`\n- `bottomLeft`, `bottomCenter`, `bottomRight`\n\n```javascript\nconst text = new Text({ content: \"Centered\", fontSize: 16 });\n\n// Center the text on the artboard\ntext.position({\n  relativeFrom: text.center,\n  relativeTo: artboard.contentBox.center,\n  x: 0,\n  y: 0\n});\n```\n\n## Annotating LaTeX Formulas\n\n### Using \\cssId{id}{content}\n\nMark specific parts of a formula with unique IDs for highlighting or referencing.\n\n```javascript\nconst formula = new Text({\n  content: \"$\\\\cssId{coeff}{2}x^{\\\\cssId{exp}{2}} + \\\\cssId{const}{5}$\",\n  fontSize: 20\n});\n\nartboard.add(formula);\n\n// Get the annotated element\nconst coefficient = formula.getElementById(\"coeff\");\n\nif (coefficient) {\n  // Highlight by drawing a rectangle behind it\n  const highlight = new Rect({\n    width: coefficient.bbox.width + 4,\n    height: coefficient.bbox.height + 4,\n    style: { fill: \"yellow\", opacity: 0.5 }\n  });\n  \n  highlight.position({\n    relativeFrom: highlight.center,\n    relativeTo: coefficient.center,\n    x: 0,\n    y: 0\n  });\n  \n  artboard.add(highlight);\n}\n```\n\n### Using \\class{classname}{content}\n\nGroup multiple parts with the same class for batch operations.\n\n```javascript\nconst formula = new Text({\n  content: \"$\\\\class{variable}{x} + \\\\class{variable}{y} = \\\\class{constant}{10}$\",\n  fontSize: 18\n});\n\nartboard.add(formula);\n\n// Get all elements with class \"variable\"\nconst variables = formula.getElementsByClassName(\"variable\");\n\nvariables.forEach(element => {\n  // Draw circles around variables\n  const circle = new Circle({\n    radius: element.bbox.width / 2 + 5,\n    style: { fill: \"none\", stroke: \"blue\", strokeWidth: 2 }\n  });\n  \n  circle.position({\n    relativeFrom: circle.center,\n    relativeTo: element.center,\n    x: 0,\n    y: 0\n  });\n  \n  artboard.add(circle);\n});\n```\n\n### Annotated Element Properties\n\nAnnotated elements provide convenient anchor points:\n\n```javascript\nconst element = formula.getElementById(\"myId\");\n\nif (element) {\n  console.log(element.center);       // Center point\n  console.log(element.topLeft);      // Top-left corner\n  console.log(element.topCenter);    // Top-center\n  console.log(element.topRight);     // Top-right corner\n  console.log(element.leftCenter);   // Left-center\n  console.log(element.rightCenter);  // Right-center\n  console.log(element.bottomLeft);   // Bottom-left corner\n  console.log(element.bottomCenter); // Bottom-center\n  console.log(element.bottomRight);  // Bottom-right corner\n  \n  // Convenient aliases\n  console.log(element.top);          // Same as topCenter\n  console.log(element.bottom);       // Same as bottomCenter\n  console.log(element.left);         // Same as leftCenter\n  console.log(element.right);        // Same as rightCenter\n  \n  // Bounding box\n  console.log(element.bbox);         // { x, y, width, height }\n}\n```\n\n## Complete Examples\n\n### Labeled Equation with Annotations\n\n```javascript\n// Create equation with annotated parts\nconst equation = new Text({\n  content: \"$\\\\cssId{a}{a}x^2 + \\\\cssId{b}{b}x + \\\\cssId{c}{c} = 0$\",\n  fontSize: 24\n});\n\nartboard.add(equation);\n\n// Highlight coefficient 'a'\nconst aCoeff = equation.getElementById(\"a\");\nif (aCoeff) {\n  const highlight = new Rect({\n    width: aCoeff.bbox.width + 6,\n    height: aCoeff.bbox.height + 6,\n    style: { fill: \"yellow\", opacity: 0.4 }\n  });\n  \n  highlight.position({\n    relativeFrom: highlight.center,\n    relativeTo: aCoeff.center,\n    x: 0,\n    y: 0\n  });\n  \n  artboard.add(highlight);\n  \n  // Add label below\n  const label = new Text({\n    content: \"quadratic coefficient\",\n    fontSize: 12,\n    style: { fill: \"gray\" }\n  });\n  \n  label.position({\n    relativeFrom: label.topCenter,\n    relativeTo: aCoeff.bottomCenter,\n    x: 0,\n    y: 5\n  });\n  \n  artboard.add(label);\n}\n```\n\n### Theorem with Mixed Text and Math\n\n```javascript\nconst theorem = new Text({\n  content: \"Pythagorean Theorem: For a right triangle with legs $a$ and $b$ and hypotenuse $c$, we have $a^2 + b^2 = c^2$.\",\n  fontSize: 16,\n  fontFamily: \"Georgia, serif\"\n});\n\ntheorem.position({\n  relativeFrom: theorem.topLeft,\n  relativeTo: artboard.contentBox.topLeft,\n  x: 40,\n  y: 40\n});\n\nartboard.add(theorem);\n```\n\n### Displayed Equation\n\n```javascript\nconst displayEquation = new Text({\n  content: \"$$\\\\int_{-\\\\infty}^{\\\\infty} e^{-x^2} dx = \\\\sqrt{\\\\pi}$$\",\n  fontSize: 20\n});\n\ndisplayEquation.position({\n  relativeFrom: displayEquation.center,\n  relativeTo: artboard.contentBox.center,\n  x: 0,\n  y: 0\n});\n\nartboard.add(displayEquation);\n```\n\n### Diagram Labels\n\n```javascript\n// Create a triangle\nconst triangle = new Triangle({\n  type: \"right\",\n  a: 100,\n  b: 80,\n  style: { fill: \"lightblue\", stroke: \"navy\", strokeWidth: 2 }\n});\n\nartboard.add(triangle);\n\nconst sides = triangle.getSides();\n\n// Label sides with LaTeX\nconst sideA = new Text({ content: \"$a$\", fontSize: 14 });\nsideA.position({\n  relativeFrom: sideA.center,\n  relativeTo: sides[0].center,\n  x: 0,\n  y: 15\n});\nartboard.add(sideA);\n\nconst sideB = new Text({ content: \"$b$\", fontSize: 14 });\nsideB.position({\n  relativeFrom: sideB.center,\n  relativeTo: sides[1].center,\n  x: 20,\n  y: 0\n});\nartboard.add(sideB);\n\nconst sideC = new Text({ content: \"$c$\", fontSize: 14 });\nsideC.position({\n  relativeFrom: sideC.center,\n  relativeTo: sides[2].center,\n  x: -15,\n  y: -10\n});\nartboard.add(sideC);\n\n// Add formula below\nconst formula = new Text({\n  content: \"$a^2 + b^2 = c^2$\",\n  fontSize: 18\n});\n\nformula.position({\n  relativeFrom: formula.topCenter,\n  relativeTo: triangle.center,\n  x: 0,\n  y: 80\n});\n\nartboard.add(formula);\n```\n\n### Highlighting Parts of a Formula\n\n```javascript\n// Complex equation with multiple highlighted parts\nconst equation = new Text({\n  content: \"$f(x) = \\\\cssId{leading}{2}x^{\\\\cssId{degree}{3}} - \\\\cssId{linear}{5}x + \\\\cssId{constant}{7}$\",\n  fontSize: 22\n});\n\nartboard.add(equation);\n\n// Different colors for different parts\nconst colors = {\n  leading: \"rgba(255, 100, 100, 0.3)\",\n  degree: \"rgba(100, 255, 100, 0.3)\",\n  linear: \"rgba(100, 100, 255, 0.3)\",\n  constant: \"rgba(255, 255, 100, 0.3)\"\n};\n\nObject.keys(colors).forEach(id => {\n  const element = equation.getElementById(id);\n  if (element) {\n    const highlight = new Rect({\n      width: element.bbox.width + 4,\n      height: element.bbox.height + 4,\n      style: { fill: colors[id] }\n    });\n    \n    highlight.position({\n      relativeFrom: highlight.center,\n      relativeTo: element.center,\n      x: 0,\n      y: 0\n    });\n    \n    artboard.add(highlight);\n  }\n});\n```\n\n## Best Practices\n\n1. **Use LaTeX for math** - Wrap mathematical notation in `$...$` for proper formatting\n2. **Escape backslashes** - Use `\\\\` in JavaScript strings for LaTeX commands\n3. **Choose appropriate font size** - Match text size to diagram scale\n4. **Position from appropriate anchor** - Use topCenter for labels above, bottomCenter for labels below\n5. **Annotate for highlighting** - Use `\\cssId{}{}` to mark important parts\n6. **Use display mode for large formulas** - Use `$$...$$` for standalone equations\n7. **Consistent styling** - Use similar font sizes and colors for related labels\n8. **Test LaTeX syntax** - Verify LaTeX commands render correctly\n\n## Common LaTeX Patterns\n\n### Equation with Condition\n\n```javascript\nconst text = new Text({\n  content: \"$f(x) = \\\\begin{cases} x^2 & \\\\text{if } x \\\\geq 0 \\\\\\\\ -x^2 & \\\\text{if } x < 0 \\\\end{cases}$\",\n  fontSize: 18\n});\n```\n\n### Aligned Equations\n\n```javascript\nconst text = new Text({\n  content: \"$\\\\begin{aligned} x + y &= 5 \\\\\\\\ 2x - y &= 1 \\\\end{aligned}$\",\n  fontSize: 16\n});\n```\n\n### Vector Notation\n\n```javascript\nconst text = new Text({\n  content: \"$\\\\vec{v} = \\\\begin{pmatrix} x \\\\\\\\ y \\\\end{pmatrix}$\",\n  fontSize: 16\n});\n```\n\n### Limits\n\n```javascript\nconst text = new Text({\n  content: \"$\\\\lim_{x \\\\to \\\\infty} \\\\frac{1}{x} = 0$\",\n  fontSize: 16\n});\n```\n\n## Troubleshooting\n\n**LaTeX not rendering?**\n- Check backslashes are escaped (`\\\\` not `\\`)\n- Verify LaTeX syntax is correct\n- Ensure dollar signs are balanced\n\n**Text overlapping elements?**\n- Adjust positioning offsets\n- Check anchor points are appropriate\n- Verify z-order (render order)\n\n**Annotations not found?**\n- Ensure `\\cssId{}{}` syntax is correct\n- Check ID is unique\n- Verify formula has rendered before accessing\n\n**Text too small/large?**\n- Adjust fontSize property\n- Use relative units if needed\n- Match scale to diagram size\n\n**Wrong positioning?**\n- Use correct anchor point (relativeFrom)\n- Check target position (relativeTo)\n- Verify offsets (x, y)"
}